cmake_minimum_required(VERSION 3.0)

set(SOFTFLOAT_FAST_INT64 ON CACHE BOOL "SOFTFLOAT_FAST_INT64")
set(SOFTFLOAT_FAST_DIV64TO32 ON CACHE BOOL "SOFTFLOAT_FAST_DIV64TO32")
set(SOFTFLOAT_FAST_DIV32TO16 ON CACHE BOOL "SOFTFLOAT_FAST_DIV32TO16")

add_library(softfloat_build INTERFACE)
target_link_libraries(softfloat_build
INTERFACE
	softfloat_interface
)
target_compile_definitions(softfloat_build
INTERFACE
	SOFTFLOAT_FAST_INT64=$<IF:$<BOOL:${SOFTFLOAT_FAST_INT64}>,1,0>
	SOFTFLOAT_FAST_DIV64TO32=$<IF:$<BOOL:${SOFTFLOAT_FAST_DIV64TO32}>,1,0>
	SOFTFLOAT_FAST_DIV32TO16=$<IF:$<BOOL:${SOFTFLOAT_FAST_DIV32TO16}>,1,0>
)
target_compile_features(softfloat_build
INTERFACE
	cxx_auto_type
	cxx_alias_templates
	cxx_alignas
	cxx_alignof
	cxx_attributes
	cxx_attribute_deprecated
	cxx_auto_type
	cxx_binary_literals
	cxx_constexpr
	cxx_decltype
	cxx_defaulted_functions
	cxx_delegating_constructors
	cxx_deleted_functions
	cxx_digit_separators
	cxx_enum_forward_declarations
	cxx_explicit_conversions
	cxx_extern_templates
	cxx_final
	cxx_generalized_initializers
	cxx_inline_namespaces
	cxx_lambdas
	cxx_lambda_init_captures
)
if(NOT(MSVC))
	target_compile_options(softfloat_build INTERFACE -Wall)
endif()

add_subdirectory(private)
add_subdirectory(public)

add_subdirectory(models/x86)
add_subdirectory(models/RISCV)
